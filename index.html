<!doctype html>
<html lang="en">
  <head>
    <title>Semper Administrator</title>
    <link rel="stylesheet" href="node_modules/ng-admin/build/ng-admin.min.css">
  </head>
  <body ng-app="myApp">

    <div ui-view></div>

    <script src="node_modules/ng-admin/build/ng-admin.min.js"></script>

    <script type="text/javascript">
    var myApp = angular.module('myApp', ['ng-admin']);
    myApp.config(['NgAdminConfigurationProvider', 'RestangularProvider', function(NgAdminConfigurationProvider, RestangularProvider) {
        var nga = NgAdminConfigurationProvider;

        RestangularProvider.setDefaultHeaders({'x-access-token': 'test' });
        RestangularProvider.setRestangularFields({ id: '_id' });

        RestangularProvider.setResponseInterceptor(function(response, operation, route, url) {
    	  var data;
    	  if (operation === 'getList') {
    	    data = response.data ? response.data : response;
    	  } else {
    	    data = response;
    	  }
    	  return data;
    	});

        // create an admin application
        var admin = nga.application('Semper LLC Administrator')
        	.baseApiUrl('http://semperllc.herokuapp.com/'); 

	    var user = nga.entity('users').identifier(nga.field('id'));

	    user.listView()
	    .fields([
	        nga.field('firstname'),
	        nga.field('username'),
	        nga.field('email'),
	        nga.field('type'),
	        nga.field('phone')
	    ]).listActions(['edit', 'delete'])
	    .filters([
	    	nga.field('q', 'template')
                .label('')
                .pinned(true)
                .template('<div class="input-group"><input type="text" ng-model="value" placeholder="Search" class="form-control"></input><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span></div>'),
            nga.field('type').label('Type'),
            nga.field('username', 'string').label('Username'),	
            nga.field('email', 'string').label('email'),
            nga.field('city', 'string').label('City'),
            nga.field('state', 'string').label('State')
        ])

	    user.creationView()
	        .title('Create new User')
	        .fields([
	            nga.field('firstname').validation({required: true }).cssClasses('col-sm-4'),
	            nga.field('lastname').validation({required: true }).cssClasses('col-sm-4'),
	            nga.field('username').validation({required: true }).cssClasses('col-sm-4'),
	            nga.field('password').validation({required: true }).cssClasses('col-sm-4'),
	            nga.field('email').validation({required: true }).cssClasses('col-sm-4'),
	            nga.field('city').validation({required: true }).cssClasses('col-sm-4'),
	            nga.field('state').validation({required: true }).cssClasses('col-sm-4'),
	            nga.field('zip').validation({required: true }).cssClasses('col-sm-4'),
	            nga.field('shortProfile', 'wysiwyg').validation({required: true })
	        ]);

	    user.editionView().fields(user.creationView().fields());

	    admin.addEntity(user);

	    /* Job */
	    var job = nga.entity('jobs').identifier(nga.field('_id'));
	    job.label('Jobs');

	    job.listView().fields([
	        nga.field('name')
	    ]);

	    job.creationView()
	        .title('Create new Job')
	        .fields([
	            nga.field('name').validation({required: true }).cssClasses('col-sm-8'),
	            nga.field('city').validation({required: true }).cssClasses('col-sm-4'),
	            nga.field('state').validation({required: true }).cssClasses('col-sm-4'),
	            nga.field('description', 'wysiwyg').validation({required: true })
	        ]);

	    job.editionView().fields(job.creationView().fields());

	    admin.addEntity(job);

	    /* Agent */
	    var agent = nga.entity('agents').identifier(nga.field('id'));
	    agent.listView().fields([
	        nga.field('name'),
	        nga.field('city'),
	        nga.field('state'),
	        nga.field('description')
	    ]);
	    admin.addEntity(agent);

	    /* HomeOffice */
	    var homeoffice = nga.entity('homeoffice').identifier(nga.field('id'));
	    homeoffice.listView().fields([
	        nga.field('name'),
	        nga.field('city'),
	        nga.field('state')
	    ]);
	    admin.addEntity(homeoffice);

	    /* Application */
	    var application = nga.entity('application').identifier(nga.field('_id'));
	    application.listView().fields([
	        nga.field('name')
	    ]);
	    admin.addEntity(application);

        nga.configure(admin);
    }]);
    </script>

  </body>
</html>